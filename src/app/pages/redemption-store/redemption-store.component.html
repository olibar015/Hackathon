<div class="reward-page" [class.sidebar-open]="isSidebarOpen">
  <app-sidebar class="sidebar-panel" role="employee" displayName="User"></app-sidebar>
  <div class="page-overlay" (click)="closeSidebar()"></div>

  <main class="reward-content">
    <header class="page-header">
      <button class="sidebar-toggle" type="button" (click)="toggleSidebar()" aria-label="Toggle sidebar">
        <svg viewBox="0 0 24 24" role="img" focusable="false">
          <path d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <div>
        <h1>Reward Store</h1>
        <p>Redeem your points for amazing rewards</p>
      </div>
    </header>

    <div class="loyalty-card" *ngIf="role === 'employee'">
      <div class="card-top">
        <div>
          <div class="card-label">Loyalty Card</div>
          <div class="card-label secondary">Current Points</div>
        </div>
        <span class="gold-badge">üèÜ Gold</span>
      </div>
      <div class="card-points">{{ currentPoints | number }}</div>
      <div class="card-bottom">
        <span>Expiry: {{ expiryDate }}</span>
      </div>
    </div>

    <div class="rewards-container">
      <div class="rewards-header">
        <button *ngIf="role === 'admin'" class="create-btn" (click)="openCreateModal()">
          <svg viewBox="0 0 24 24" role="img" focusable="false">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
          </svg>
          Create Reward
        </button>
      </div>
      <div *ngIf="rewards.length === 0" class="no-rewards-message">
        <p>No rewards available</p>
      </div>
      <div class="rewards-grid" *ngIf="rewards.length > 0">
        <div class="reward-card" *ngFor="let reward of rewards">
          <div class="reward-header">
            <div class="reward-icon">üéÅ</div>
            <span *ngIf="reward.badge" class="reward-badge">{{ reward.badge }}</span>
            <span class="quantity-badge">{{ reward.quantity }}</span>
          </div>
          <div class="reward-body">
            <h3>{{ reward.name }}</h3>
            <div class="reward-meta">
              <span class="points">{{ reward.points }} pts</span>
              <span *ngIf="reward.originalPrice" class="price">{{ reward.originalPrice }}</span>
            </div>
          </div>
          <div class="reward-actions">
            <button *ngIf="role === 'employee'" class="redeem-btn" 
                    (click)="redeemReward(reward)">
              <svg viewBox="0 0 24 24" role="img" focusable="false">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
              </svg>
              Redeem
            </button>
            <ng-container *ngIf="role === 'admin'">
              <button class="edit-btn" (click)="editReward(reward)" title="Edit reward">
                <svg viewBox="0 0 24 24" role="img" focusable="false">
                  <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z" />
                </svg>
                Edit
              </button>
              <button class="delete-btn" (click)="deleteReward(reward.id)" title="Delete reward">
                <svg viewBox="0 0 24 24" role="img" focusable="false">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-9l-1 1H5v2h14V4z" />
                </svg>
                Remove
              </button>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
