<div class="dashboard-layout">
    <!-- SIDEBAR -->
    <app-sidebar role="admin" displayName="User"></app-sidebar>

    <!-- MAIN DASHBOARD CONTENT -->
    <div class="dashboard-content">
        <h1 class="page-title">Dashboard</h1>
        <p class="page-subtitle">Overview of tasks by department</p>

        <!-- Total Tasks -->
        <section class="section">
            <div class="total-card">
                <div>
                    <p>Total Tasks Across All Departments</p>
                    <h1>45</h1>
                </div>
            </div>
        </section>

        <!-- Tasks by Department -->
        <section class="section">
            <h2>Tasks by Department</h2>

            <div class="dept-grid">
                <div class="dept-card it">IT <strong>15</strong></div>
                <div class="dept-card hr">HR <strong>12</strong></div>
                <div class="dept-card fin">Finance <strong>10</strong></div>
                <div class="dept-card ops">Operations <strong>8</strong></div>
            </div>
        </section>

        <!-- Pending â†’ Verified (Admin Verification Queue) -->
        <section class="verify-panel">
            <div class="verify-panel__header">
                <div>
                    <h2 class="verify-title">Pending Task Verification</h2>
                    <p class="verify-subtitle">Review submitted proofs and verify tasks.</p>
                </div>

                <div class="verify-badge">
                    <span class="verify-badge__text">{{ pendingCount }} pending</span>
                </div>
            </div>

            <div class="verify-list" *ngIf="pendingTaskVerifications.length; else noPending">
                <div class="verify-item" *ngFor="let task of pendingTaskVerifications; trackBy: trackByIdx">
                    <div class="verify-item__left">
                        <div class="verify-name">{{ task.employeeName }}</div>

                        <div class="verify-meta">
                            <span class="chip">{{ task.department }}</span>
                            <span class="dot">â€¢</span>
                            <span class="task-title">{{ task.taskTitle }}</span>
                        </div>

                        <div class="verify-date">Submitted: {{ task.submittedAt }}</div>
                    </div>

                    <div class="verify-item__proofs">
                        <ng-container *ngFor="let proof of task.proofs; trackBy: trackByIdx">
                            <a class="proof" [href]="proof.url" target="_blank" rel="noopener">
                                <ng-container *ngIf="proof.type === 'image'; else fileProof">
                                    <img class="proof__thumb" [src]="proof.url" [alt]="proof.label || 'Proof'" />
                                </ng-container>

                                <ng-template #fileProof>
                                    <div class="proof__file">
                                        <div class="proof__fileIcon">ðŸ“„</div>
                                        <div class="proof__fileText">{{ proof.label || 'File' }}</div>
                                    </div>
                                </ng-template>
                            </a>
                        </ng-container>
                    </div>

                    <div class="verify-item__actions">
                        <button class="btn btn--ghost" (click)="rejectTask(task)">Reject</button>
                        <button class="btn btn--primary" (click)="approveTask(task)">Verify</button>
                    </div>
                </div>
            </div>

            <ng-template #noPending>
                <div class="verify-empty">No pending submissions right now âœ…</div>
            </ng-template>
        </section>


    </div>
</div>